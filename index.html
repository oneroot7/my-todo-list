<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>ì—…ë¬´ ì¼ì • ê´€ë¦¬</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="login-section" style="text-align: center; margin-top: 100px;">
        <h2>ğŸ“… ì—…ë¬´ ì¼ì • ê´€ë¦¬</h2>
        <button onclick="login()" style="padding: 15px 30px; font-size: 1.1rem; cursor: pointer; border-radius: 12px; border: none; background: #4285F4; color: white; font-weight: bold;">
            Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
        </button>
    </div>

    <div id="main-content" class="todo-container" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <span id="user-info" style="font-size: 0.9rem; color: #666;"></span>
            <button onclick="logout()" style="background: none; border: none; color: #ff4d4d; cursor: pointer; text-decoration: underline;">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
        </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
      // ì¸ì¦ ëª¨ë“ˆ ì¶”ê°€
      import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

      const firebaseConfig = { /* ë³¸ì¸ ì„¤ì •ê°’ ìœ ì§€ */ };
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();

      // ì „ì—­ ë³€ìˆ˜ë¡œ í• ë‹¹
      window.db = db;
      window.auth = auth;
      window.provider = provider;
      window.signInWithPopup = signInWithPopup;
      window.signOut = signOut;

      // ë¡œê·¸ì¸ ìƒíƒœ ê°ì‹œ
      onAuthStateChanged(auth, (user) => {
          if (user) {
              document.getElementById('login-section').style.display = 'none';
              document.getElementById('main-content').style.display = 'block';
              document.getElementById('user-info').innerText = `${user.displayName}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.`;
              displaySchedules(true); // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
          } else {
              document.getElementById('login-section').style.display = 'block';
              document.getElementById('main-content').style.display = 'none';
          }
      });
    </script>
    <script src="script.js"></script>
</body>
</html>
